<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="assets/css/style.css">
  <title>Exercice 1</title>
</head>
<body>
  <div class="container-fluid text-center">
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <h1 class="display-3">Exercice 1 - JQuery</h1>
        <h3>Partie 4</h3>
        <p class="lead">Jan ! Ken ! Pon !</p>
        <span>(Pierre ! Feuille ! Ciseaux !)</span>
      </div>
    </div>
    <div id="res"class="mb-4"></div>
    <!-- Affichage des scores et du win rate -->
    <div class="d-flex justify-content-around mb-3">
      <span>
        <span>Victoire(s) : </span><span id="win">0</span>
      </span>
      <span>
        <span>Défaites(s) : </span><span id="lose">0</span>
      </span>
      <span>
        <span>Win rate : </span><span id="rate"></span><span> %</span>
      </span>
    </div>
    <div class="d-flex justify-content-around">
      <img class="img" onkeypress=""src="img/pierre.png" alt="jan">
      <img class="img" src="img/feuille.png" alt="ken">
      <img class="img" src="img/ciseaux.png" alt="pon">
    </div>
    <!-- Formualaire des choix du chifoumi -->
    <form class="mt-2" action="index.html" method="post">
      <select class="" name="">
        <option value="jan">JAN !</option>
        <option value="ken">KEN !</option>
        <option value="pon">PON !</option>
      </select>
    </form>
    <button id="test" type="button" name="button" class="btn btn-secondary mt-3">Est-ce votre ultime bafouille ?</button>

  </div>

  <script src="assets\js\jquery-3.3.1.min.js"></script>
  <script>
    $(document).ready(function(){

      // $("#pierre").animate({left: "+=500"}, 2000);
      // $("#pierre").animate({left: "-=300"}, 1000);

      // Initialisation des valeurs
      var nbGame = 0;
      var win = 0;
      var lose = 0;

      // Fonction utilisée si on clique sur l'image
      // Récupère l'alt de l'image (même valeur que sur l'option) puis appel la fonction avec le choix en paramètre
      $('.img').click(function(){
        var choix = $(this).attr("alt");
        versus(choix);
      });
      // Fonction utilisée si on passe par le menu déroulant
      // Récupère la valeur du select (même valeur que l'alt de l'image) puis appel la fonction avec le choix en paramètre
      $("#test").click(function() {
        var choixPerso = $("select").val();
        versus(choixPerso);
      });
      // Fonction effectuant le choix du bot et compare les deux choix
      function versus (choixPerso){
        //  Random pour le choix du bot
        // 1 = pierre, 2 = feuille, 3 = ciseau
        var choixBot = Math.floor(Math.random() * 3) + 1;
        // console.log(choixPerso);
        // console.log(choixBot);
        switch (choixPerso) {
          // Dans le cas ou j'ai choisi Pierre
          case "jan":
            // Dans le cas ou le bot choisi ...
            switch (choixBot) {
              case 1: //Pierre
                console.log("Égalité !");
                $("#res").text("Pierre vs Pierre");
              break;
              case 2: //Feuille
                console.log("Perdu !");
                $("#lose").text(++lose);
                $("#res").text("Pierre vs Feuille");
              break;
              case 3: //Ciseaux
                console.log("Gagné !");
                $("#win").text(++win);
                $("#res").text("Pierre vs Ciseaux");
              break;
            }
          break;
          // Dans le cas ou j'ai choisi Feuille
          case "ken":
            // Dans le cas ou le bot choisi ...
            switch (choixBot) {
              case 1: //Pierre
              console.log("Gagné !");
                $("#win").text(++win);
                $("#res").text("Pierre vs Ciseaux");
                $("#res").text("Feuille vs Pierre");
              break;
              case 2: //Feuille
                console.log("Égalité");
                $("#res").text("Feuille vs Feuille");
              break;
              case 3: //Ciseaux
                console.log("Perdu !");
                $("#lose").text(++lose);
                $("#res").text("Feuille vs Ciseaux");
              break;
            }
          break;
          // Dans le cas ou j'ai choisi Ciseaux
          case "pon":
            // Dans le cas ou le bot choisi ...
            switch (choixBot) {
              case 1: //Pierre
                console.log("Perdu !");
                $("#lose").text(++lose);
                $("#res").text("Ciseaux vs Pierre");
              break;
              case 2: //Feuille
                console.log("Gagné !");
                $("#win").text(++win);
                $("#res").text("Pierre vs Ciseaux");
                $("#res").text("Ciseaux vs Feuille");
              break;
              case 3: //Ciseaux
                console.log("Égalité !");
                $("#res").text("Ciseaux vs Ciseaux");
              break;
            }
          break;
        }
        // On recalcule le win rate à la fin de chaque boucle (afin d'éviter un décalage) puis on l'affiche
        // Affichage du win rate seulement s'il y a des win ou lose (afin d'éviter le NaN)
        if (win != 0 || lose != 0) {
          rate = ((win/(win+lose))*100).toFixed(2);
          $("#rate").text(rate);
        }
      }
    });
  </script>
</body>
</html>
